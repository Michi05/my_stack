<launch>

  <!-- The namespace and position arguments -->
  <arg name="namespace" default="" />
  <arg name="x"         default="0" />
  <arg name="y"         default="0" />
  <arg name="z"         default="0" />
  <arg name="roll"      default="0" />
  <arg name="pitch"     default="0" />
  <arg name="yaw"       default="0" />

  <!-- The pioneer3dx robot -->
  <group ns="$(arg namespace)">

    <!-- Converts the pioneer urdf.xacro to urdf and loads it in the parameter server -->
    <param name="robot_description" command="$(find xacro)/xacro.py $(find p2os_urdf)/defs/pioneer3dx.xacro" />

    <!-- Spawn robot -->
    <node
      name="spawn_robot"
      pkg="gazebo"
      type="spawn_model"
      args="-x $(arg x) -y $(arg y) -z $(arg z) -R $(arg roll) -P $(arg pitch) -Y $(arg yaw) -urdf -param robot_description -model $(arg namespace) -namespace $(arg namespace)"
      respawn="false"
      output="screen"
    />

    <!-- Controller Manager -->
    <include file="$(find pr2_controller_manager)/controller_manager.launch" />

    <!-- load controllers -->
    <node name="diffdrive" pkg="gazebo_plugins" type="gazebo_ros_diffdrive" respawn="true" output="screen"/>

  </group>

</launch>
